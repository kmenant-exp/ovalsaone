<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - Oval Sa√¥ne</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components/button.css">
    <link rel="stylesheet" href="css/pages/contact.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
</head>
<body>
    <!-- Bandeau cookies RGPD -->
    <div id="cookie-banner" class="cookie-banner hidden">
        <div class="cookie-content">
            <p>Ce site utilise des cookies pour am√©liorer votre exp√©rience. En continuant √† naviguer, vous acceptez notre utilisation des cookies.</p>
            <div class="cookie-buttons">
                <button id="accept-cookies" class="btn btn-primary">Accepter</button>
                <button id="decline-cookies" class="btn btn-secondary">Refuser</button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <div class="menu-overlay" id="menu-overlay"></div>
    <nav class="navbar" id="navbar">
        <div class="nav-container">            <a href="index.html" class="nav-logo">
                <img src="assets/logo.png" alt="Logo Association Rugby" id="nav-logo-img">
                <span>Oval Sa√¥ne</span>
            </a>
            <div class="nav-menu" id="nav-menu">
                <a href="index.html" class="nav-link">Accueil</a>
                <a href="equipes.html" class="nav-link">√âquipes</a>
                <a href="ecole.html" class="nav-link">L'√âcole</a>
                <a href="partenariat.html" class="nav-link">Partenariat & Dons</a>
                <a href="boutique.html" class="nav-link">Boutique</a>
                <a href="inscription.html" class="nav-link">Inscription</a>
                <a href="contact.html" class="nav-link active">Contact</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="page-hero">
        <div class="container">
            <h1>Contactez-nous</h1>
            <p>Nous sommes √† votre √©coute</p>
        </div>
    </section>

    <!-- Contact Info -->
    <section class="contact-info section">
        <div class="container">
            <div class="contact-grid">
                <div class="contact-card">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Adresse</h3>
                    <p>420 Route de Reyrieux, 01600 Sainte-Euph√©mie</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-phone"></i>
                    <h3>T√©l√©phone</h3>
                    <p>06 83 62 27 10</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-envelope"></i>
                    <h3>Email</h3>
                    <p><a href="mailto:contact@rugbyclub.fr">contact@rugbyclub.fr</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Formulaire de contact -->
    <section class="contact-form section bg-light">
        <div class="container">
            <div class="form-card">
                <h2>Envoyez-nous un message</h2>
                <form id="contact-form" class="form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nom">Nom *</label>
                            <input type="text" id="nom" name="nom" required>
                        </div>
                        <div class="form-group">
                            <label for="prenom">Pr√©nom *</label>
                            <input type="text" id="prenom" name="prenom" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="telephone">T√©l√©phone</label>
                            <input type="tel" id="telephone" name="telephone">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="sujet">Sujet *</label>
                        <input type="text" id="sujet" name="sujet" required>
                    </div>

                    <div class="form-group">
                        <label for="message">Message *</label>
                        <textarea id="message" name="message" rows="5" required></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary btn-large btn-donation">
                        <i class="fas fa-paper-plane"></i>
                        Envoyer le message
                    </button>
                </form>

                <div id="form-status" class="form-status hidden"></div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="map-section">
        <div class="container">
            <h2>Localisation du Stade Municipal</h2>
            <div class="map-container">
                <div class="map-wrapper">
                    <div id="map-loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-spinner fa-spin" style="color: #8fbc8f;"></i>
                        <span>Chargement de la carte...</span>
                    </div>
                    <div id="stadium-map" style="height: 400px; width: 100%; border-radius: 8px;" aria-label="Carte de localisation du stade municipal"></div>
                </div>
                <div class="map-info">
                    <h3><i class="fas fa-map-marker-alt"></i> Stade Municipal</h3>
                    <p><strong>Adresse :</strong> 420 Route de Reyrieux, 01600 Sainte-Euph√©mie</p>
                    <p><strong>Activit√©s :</strong> Entra√Ænements et matchs de l'Oval Sa√¥ne</p>
                    <a href="https://www.openstreetmap.org/search?query=420%20Route%20de%20Reyrieux,%2001600%20Sainte-Euph√©mie" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="btn btn-primary btn-small btn-donation"
                       aria-label="Ouvrir l'adresse dans OpenStreetMap">
                        <i class="fas fa-external-link-alt"></i> Voir sur OpenStreetMap
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p><i class="fas fa-envelope"></i> edr.ovalsaone@gmail.com</p>
                    <p><i class="fas fa-phone"></i> 06 83 62 27 10</p>
                    <p><i class="fas fa-map-marker-alt"></i> 420 Route de Reyrieux, 01600 Sainte-Euph√©mie</p>
                </div>
                <div class="footer-section">
                    <h3>Liens rapides</h3>
                    <ul>
                        <li><a href="inscription.html">Inscription</a></li>
                        <li><a href="equipes.html">Nos √©quipes</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>                <div class="footer-section">
                    <h3>Suivez-nous</h3>
                    <div class="instagram-embed">
                        <iframe src="https://www.instagram.com/k.menant/embed" 
                                width="400" 
                                height="480" 
                                frameborder="0" 
                                scrolling="no" 
                                allowtransparency="true"
                                style="border: none; overflow: hidden; width: 100%; max-width: 300px; height: 350px;">
                        </iframe>
                    </div>
                </div>
            </div>            <div class="footer-bottom">
                <p>&copy; 2025 Oval Sa√¥ne. Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>
    
    <!-- Initialisation de la carte -->
    <script>
        // Fonction pour initialiser la carte avec g√©ocodage
        async function initializeMap() {
            const loadingElement = document.getElementById('map-loading');
            
            try {
                // G√©ocodage de l'adresse via Nominatim (OpenStreetMap)
                const address = "420 Route de Reyrieux, 01600 Sainte-Euph√©mie, France";
                const geocodeUrl = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1`;
                
                const response = await fetch(geocodeUrl);
                const data = await response.json();
                
                let lat, lng;
                if (data && data.length > 0) {
                    // Utiliser les coordonn√©es g√©ocod√©es
                    lat = parseFloat(data[0].lat);
                    lng = parseFloat(data[0].lon);
                    console.log('Coordonn√©es trouv√©es:', lat, lng);
                } else {
                    // Coordonn√©es de fallback pour la r√©gion de Sainte-Euph√©mie
                    lat = 45.9167;
                    lng = 4.8333;
                    console.log('Utilisation des coordonn√©es de fallback');
                }
                
                // Initialiser la carte
                const map = L.map('stadium-map').setView([lat, lng], 16);
                
                // Ajouter les tuiles OpenStreetMap
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    maxZoom: 19
                }).addTo(map);
                
                // Ajouter un marqueur pour le stade avec une ic√¥ne personnalis√©e
                const stadiumIcon = L.divIcon({
                    html: '<div style="background: #8fbc8f; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 16px; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">üèâ</div>',
                    className: 'custom-div-icon',
                    iconSize: [30, 30],
                    iconAnchor: [15, 15]
                });
                
                const marker = L.marker([lat, lng], { icon: stadiumIcon }).addTo(map);
                marker.bindPopup(`
                    <div style="text-align: center; font-family: Arial, sans-serif; max-width: 200px;">
                        <h3 style="color: #8fbc8f; margin: 0 0 8px 0; font-size: 16px;">üèâ Stade Municipal</h3>
                        <p style="margin: 4px 0; font-weight: bold; font-size: 14px;">420 Route de Reyrieux</p>
                        <p style="margin: 4px 0; font-size: 14px;">01600 Sainte-Euph√©mie</p>
                        <p style="margin: 8px 0 0 0; font-style: italic; color: #666; font-size: 12px;">
                            Terrain d'entra√Ænement et matchs<br>de l'Oval Sa√¥ne
                        </p>
                    </div>
                `, {
                    closeButton: true,
                    maxWidth: 250
                }).openPopup();
                
                // Masquer l'indicateur de chargement
                if (loadingElement) {
                    loadingElement.style.display = 'none';
                }
                
                // Ajouter un √©v√©nement pour le redimensionnement
                map.invalidateSize();
                
            } catch (error) {
                console.error('Erreur lors du g√©ocodage:', error);
                
                // En cas d'erreur, utiliser les coordonn√©es de fallback
                const map = L.map('stadium-map').setView([45.9167, 4.8333], 15);
                
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    maxZoom: 19
                }).addTo(map);
                
                const marker = L.marker([45.9167, 4.8333]).addTo(map);
                marker.bindPopup(`
                    <div style="text-align: center; font-family: Arial, sans-serif;">
                        <h3 style="color: #8fbc8f; margin: 0 0 8px 0;">üèâ Stade Municipal</h3>
                        <p style="margin: 4px 0; font-weight: bold;">420 Route de Reyrieux</p>
                        <p style="margin: 4px 0;">01600 Sainte-Euph√©mie</p>
                        <p style="margin: 8px 0 0 0; font-style: italic; color: #666;">
                            Terrain d'entra√Ænement et matchs<br>de l'Oval Sa√¥ne
                        </p>
                    </div>
                `);
                
                // Masquer l'indicateur de chargement m√™me en cas d'erreur
                if (loadingElement) {
                    loadingElement.style.display = 'none';
                }
            }
        }
        
        // Initialiser la carte quand la page est charg√©e
        document.addEventListener('DOMContentLoaded', initializeMap);
    </script>

    <script src="js/main.js"></script>
    <script src="js/contact.js"></script>
</body>
</html>
